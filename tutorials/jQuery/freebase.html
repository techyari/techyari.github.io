<!DOCTYPE html>
<html>
<head>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
     <link rel="stylesheet" href="css/jquery-ui.css" />
     <script src="js/jquery-ui.js"></script>
</head>
<body>

<div class="result">
                <div class="search">
                <input class="city_names" id="city_names" name="city_names" placeholder="Enter city name here"/>
                </div>
          </div>

<script type="text/javascript">
$(document).ready(function(){

 // populating the dropdown list using autocomplete with freebase api 
$( "#city_names" ).autocomplete({
      source: function( request, response ) {
        $.ajax({
          url: "https://www.googleapis.com/freebase/v1/search",
          dataType: "json",
          data: {
            query: request.term,
            mode:"json"
          },
          success: function(data) {

            var parsed = data.result;
            console.log(parsed);
             var newArray = new Array(parsed.length);
             var i = 0;
              parsed.forEach(function (entry) {
                     var category;
                     if(entry.notable){category = entry.notable.name;}
                     var newObject = {
                         label: entry.name+ " (" + category + ")",
                         mid:entry.mid,
                         id:entry.id
                     };
                     newArray[i] = newObject;
                     i++;
                 });

              response(newArray);
              //console.log(newArray);
  
          }
        });
      },
      minLength: 3,
      select: function( event, ui ) {
        /*submit an ajax request with item id on select of a dropdown item and fetch all the details from freebase databse for perticular mid. */
      },
      open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
      },
      close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
      }
    });

// Getting result for specific select from dropdown
});
</script>


</body>
</html>